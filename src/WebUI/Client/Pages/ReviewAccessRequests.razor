@page "/review-access-requests"
@using OfficeEntry.Domain.Entities;
@inject HttpClient Http

<h3>Review Access Requests</h3>

@if (accessRequests == null)
{
    <Loading />
}
else
{
    foreach (var accessRequest in accessRequests)
    {
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row no-gutters">
                <div class="col-md-4 bg-secondary text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="100" height="100" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 512"><path d="M496 224c-79.6 0-144 64.4-144 144s64.4 144 144 144s144-64.4 144-144s-64.4-144-144-144zm64 150.3c0 5.3-4.4 9.7-9.7 9.7h-60.6c-5.3 0-9.7-4.4-9.7-9.7v-76.6c0-5.3 4.4-9.7 9.7-9.7h12.6c5.3 0 9.7 4.4 9.7 9.7V352h38.3c5.3 0 9.7 4.4 9.7 9.7v12.6zM320 368c0-27.8 6.7-54.1 18.2-77.5c-8-1.5-16.2-2.5-24.6-2.5h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h347.1c-45.3-31.9-75.1-84.5-75.1-144zm-96-112c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128z" fill="white" /></svg>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">@accessRequest.Building.Name</h5>
                        <span class="oi circle-x" aria-hidden="true"></span>

                        <p class="card-text">@accessRequest.Floor.Name</p>
                        <p class="card-text">@accessRequest.StartTime</p>
                        <p class="card-text"><small class="text-muted">@accessRequest.Status.Value</small></p>
                    </div>
                </div>
            </div>
        </div>
    }
}

@code {
    private Domain.Entities.AccessRequest[] accessRequests;

    protected override async Task OnInitializedAsync()
    {
        accessRequests = await Http.GetFromJsonAsync<Domain.Entities.AccessRequest[]>("api/ReviewAccessRequests");
    }
}