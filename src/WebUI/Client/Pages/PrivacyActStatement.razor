@page "/privacy-act-statement"
@inherits PrivacyActStatementBase

<h1>Privacy Act Statement</h1>

@if (_data is null)
{
    <p>Loading...</p>
}
else
{
    <Survey Id="surveyElementPrivacyAct"
            SurveyUrl="sample-data/privacyActStatementSurvey.json"
            OnSurveyCompleted="@OnSurveyCompleted"
            Data="@_data"/>
}

@code {
    private string _data;

    protected override async Task OnInitializedAsync()
    {
        var isPrivacyActStatementAccepted = await Http.GetFromJsonAsync<bool>("api/PrivacyStatement");

        //var a = new { questionAcceptPaStatement = new { iAcceptPaStatement = isPrivacyActStatementAccepted } };

        //_data = System.Text.Json.JsonSerializer.Serialize(a);

        if (isPrivacyActStatementAccepted)
        {
            _data = "{ \"questionAcceptPaStatement\": [ \"iAcceptPaStatement\" ] }";
        }
        else
        {
            _data = "{}";
        }
    }
}